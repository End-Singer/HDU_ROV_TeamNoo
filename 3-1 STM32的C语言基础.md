### 按键抖动
按下和松手瞬间会伴随一连串抖动（5-10ms），过滤方法加一段延时
### 传感器模块介绍
光敏、热敏、对射式红外、反射式红外
共性是电阻会随外界的模拟量变化而变化
>**定值电阻提供了参考基准**，通过与光敏电阻**分压**，把光敏电阻的阻值变化转换成**电压变化**，这样ADC就能读取到模拟电压值了！
>测量的是定值电阻两端的电压，可变电阻↓测量电压↓

>**滤波电容就像电路的"稳压器"和"减震器"，利用电容电压不能突变的特性来维持电源的稳定和纯净！**
### 硬件电路
一般用下接按键；为了避免PA0悬空，引脚电压不确定会接一个上拉电阻，此时可以设置浮空输入或者上拉输入模式`高电平更加稳定`；下拉输入不推荐
## C语言
### 数据类型
![输入图片说明](/imgs/2025-11-05/7mYFlJKnVaRsl3b3.png)
- 在STM32里long是32位，long long才是64位
- 在单片机里我们用char存整数为了避免“文不对题”STM32对类型做了重新的命名，比如char变成了int8_t
### 宏定义
- 作用：用一个字符串代替一个数字，方便理解，避免出错；提取程序中经常出现的参数，便于快速修改`比如有10个GPIO_PIN_0,一个个修改很容易错，如果有宏定义，只改宏定义就等于改了10个`
- 定义宏定义：#define string 10000
- 引用宏定义：int number = string  等效于 int number = 10000
#### .h文件（头文件保护）
```c
#ifndef __OLED_H
#define __OLED_H

#endif

```
- **核心目的：** 确保一个头文件在同一个编译单元（通常是一个 `.c` 文件）中只被包含一次，从而避免**重复定义**的编译错误。
- **命名格式：这个格式 `__ + 全大写字母` 是为了确保宏名的唯一性和避免冲突。
![输入图片说明](/imgs/2025-11-07/NPiNaIUy5IaEUCzh.png)
### typedef
![输入图片说明](/imgs/2025-11-05/vwQUJoOIAzjoBvD8.png)
给变量类型重命名一般用typedef因为它会检查是否是变量名称
### 结构体
```c
#include <stdio.h>
int main()
{
	int a;
	a = 66;
	printf("a=%d\n",a);
	
	int b[5];
	b[0] = 66;
	b[1] = 77;
	b[2] = 88;
	printf("b[0]=%d\n",b[0]);
	printf("b[1]=%d\n",b[1]);
	printf("b[2]=%d\n",b[2]);
	
	struct{char x;int y;float z;} c;
	c.x = 'A';
	c.y = 66;
	c.z = 1.23;
	printf("c.x=%c\n", c.x);
	printf("c.y=%d\n", c.y);
	printf("c.z=%f\n", c.z);
	return 0;
}
```
**struct{char x;int y;float z;} c 太长了，可以用typedef来引用**
```c
typedef struct{
	char x;
	int y;
	float z;
} structname_t;
int main()
{
	structname_t c;
	return 0;
}
```
除了**变量名.结构体成员名**引用
还可以用**结构体指针c名->结构体成员名**引用
```c
#include <stdio.h>
typedef struct{
	char x;
	int y;
	float z;
} structname_t;
int main()
{
	structname_t c;
	structname_t *p = &c;
	p -> x = 'A';
	p -> y = 66;
	p -> z = 1.23;
	printf("c.x=%c\n", c.x);
	printf("c.y=%d\n", c.y);
	printf("c.z=%f\n", c.z);
	return 0;
}

```
### 枚举
- **enum**
- 用途：定义一个取值受限的整型变量
```c
#include <stdio.h>
// 定义枚举 
typedef enum{
	true = 1,
	false = 0
} bool_t;
int main()
{
	bool_t bool; 
	
	// 引用枚举 
	bool = true; // true = 1
	bool = false; // false = 0
	bool = 100; // 编入了限制外的值会报警告
	bool = (bool_t)1; // 如果赋枚举里有的值需要强制类型转换 
	return 0;
}
```
<!--stackedit_data:
eyJoaXN0b3J5IjpbMTA4Nzc5MzA2NF19
-->